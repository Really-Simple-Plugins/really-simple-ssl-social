define("ace/ext/elastic_tabstops_lite",["require","exports","module","ace/editor","ace/config"],function(d,b,f){var c=function(i){this.$editor=i;var g=this,j=[],h=!1;this.onAfterExec=function(){h=!1,g.processRows(j),j=[]},this.onExec=function(){h=!0},this.onChange=function(k){h&&(j.indexOf(k.start.row)==-1&&j.push(k.start.row),k.end.row!=k.start.row&&j.push(k.end.row))}};(function(){this.processRows=function(q){this.$inChange=!0;var x=[];for(var j=0,g=q.length;j<g;j++){var m=q[j];if(x.indexOf(m)>-1){continue}var y=this.$findCellWidthsForBlock(m),h=this.$setBlockCellWidthsToMax(y.cellWidths),w=y.firstRow;for(var v=0,p=h.length;v<p;v++){var k=h[v];x.push(w),this.$adjustRow(w,k),w++}}this.$inChange=!1},this.$findCellWidthsForBlock=function(l){var h=[],m,k=l;while(k>=0){m=this.$cellWidthsForRow(k);if(m.length==0){break}h.unshift(m),k--}var g=k+1;k=l;var j=this.$editor.session.getLength();while(k<j-1){k++,m=this.$cellWidthsForRow(k);if(m.length==0){break}h.push(m)}return{cellWidths:h,firstRow:g}},this.$cellWidthsForRow=function(q){var x=this.$selectionColumnsForRow(q),j=[-1].concat(this.$tabsForRow(q)),g=j.map(function(i){return 0}).slice(1),m=this.$editor.session.getLine(q);for(var y=0,h=j.length-1;y<h;y++){var w=j[y]+1,v=j[y+1],p=this.$rightmostSelectionInCell(x,v),k=m.substring(w,v);g[y]=Math.max(k.replace(/\s+$/g,"").length,p-w)}return g},this.$selectionColumnsForRow=function(h){var g=[],i=this.$editor.getCursorPosition();return this.$editor.session.getSelection().isEmpty()&&h==i.row&&g.push(i.column),g},this.$setBlockCellWidthsToMax=function(w){var A=!0,k,g,p,B=this.$izip_longest(w);for(var j=0,z=B.length;j<z;j++){var y=B[j];if(!y.push){console.error(y);continue}y.push(NaN);for(var v=0,m=y.length;v<m;v++){var x=y[v];A&&(k=v,p=0,A=!1);if(isNaN(x)){g=v;for(var q=k;q<g;q++){w[q][j]=p}A=!0}p=Math.max(p,x)}}return w},this.$rightmostSelectionInCell=function(l,h){var m=0;if(l.length){var k=[];for(var g=0,j=l.length;g<j;g++){l[g]<=h?k.push(g):k.push(0)}m=Math.max.apply(Math,k)}return m},this.$tabsForRow=function(k){var h=[],l=this.$editor.session.getLine(k),j=/\t/g,g;while((g=j.exec(l))!=null){h.push(g.index)}return h},this.$adjustRow=function(y,C){var m=this.$tabsForRow(y);if(m.length==0){return}var g=0,v=-1,D=this.$izip(C,m);for(var k=0,B=D.length;k<B;k++){var A=D[k][0],x=D[k][1];v+=1+A,x+=g;var q=v-x;if(q==0){continue}var z=this.$editor.session.getLine(y).substr(0,x),w=z.replace(/\s*$/g,""),j=z.length-w.length;q>0&&(this.$editor.session.getDocument().insertInLine({row:y,column:x+1},Array(q+1).join(" ")+"	"),this.$editor.session.getDocument().removeInLine(y,x,x+1),g+=q),q<0&&j>=-q&&(this.$editor.session.getDocument().removeInLine(y,x+q,x),g+=q)}},this.$izip_longest=function(m){if(!m[0]){return[]}var j=m[0].length,q=m.length;for(var l=1;l<q;l++){var h=m[l].length;h>j&&(j=h)}var k=[];for(var p=0;p<j;p++){var g=[];for(var l=0;l<q;l++){m[l][p]===""?g.push(NaN):g.push(m[l][p])}k.push(g)}return k},this.$izip=function(l,h){var m=l.length>=h.length?h.length:l.length,k=[];for(var g=0;g<m;g++){var j=[l[g],h[g]];k.push(j)}return k}}).call(c.prototype),b.ElasticTabstopsLite=c;var a=d("../editor").Editor;d("../config").defineOptions(a.prototype,"editor",{useElasticTabstops:{set:function(g){g?(this.elasticTabstops||(this.elasticTabstops=new c(this)),this.commands.on("afterExec",this.elasticTabstops.onAfterExec),this.commands.on("exec",this.elasticTabstops.onExec),this.on("change",this.elasticTabstops.onChange)):this.elasticTabstops&&(this.commands.removeListener("afterExec",this.elasticTabstops.onAfterExec),this.commands.removeListener("exec",this.elasticTabstops.onExec),this.removeListener("change",this.elasticTabstops.onChange))}}})});(function(){window.require(["ace/ext/elastic_tabstops_lite"],function(a){if(typeof module=="object"&&typeof exports=="object"&&module){module.exports=a}})})();