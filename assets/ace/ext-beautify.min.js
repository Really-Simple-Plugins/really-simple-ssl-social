define("ace/ext/beautify",["require","exports","module","ace/token_iterator"],function(d,b,f){function a(h,g){return h.type.lastIndexOf(g+".xml")>-1}var c=d("../token_iterator").TokenIterator;b.singletonTags=["area","base","br","col","command","embed","hr","html","img","input","keygen","link","meta","param","source","track","wbr"],b.blockTags=["article","aside","blockquote","body","div","dl","fieldset","footer","form","head","header","html","nav","ol","p","script","section","style","table","tbody","tfoot","thead","ul"],b.beautify=function(al){var ad=new c(al,0,0),X=ad.getCurrentToken(),ac=al.getTabString(),U=b.singletonTags,ap=b.blockTags,ak,af=!1,an=!1,ai=!1,ab="",am="",R="",ae=0,aj=0,I=0,ao=0,Q=0,V=0,q=!1,J,i=0,z=0,Y=[],ag=!1,G,aa=!1,t=!1,F=!1,aq=!1,W={0:0},r={},K=function(){ak&&ak.value&&ak.type!=="string.regexp"&&(ak.value=ak.value.trim())},Z=function(){ab=ab.replace(/ +$/,"")},ah=function(){ab=ab.trimRight(),af=!1};while(X!==null){i=ad.getCurrentTokenRow(),Y=ad.$rowTokens,ak=ad.stepForward();if(typeof X!="undefined"){am=X.value,Q=0,F=R==="style"||al.$modeId==="ace/mode/css",a(X,"tag-open")?(t=!0,ak&&(aq=ap.indexOf(ak.value)!==-1),am==="</"&&(aq&&!af&&z<1&&z++,F&&(z=1),Q=1,aq=!1)):a(X,"tag-close")?t=!1:a(X,"comment.start")?aq=!0:a(X,"comment.end")&&(aq=!1),!t&&!z&&X.type==="paren.rparen"&&X.value.substr(0,1)==="}"&&z++,i!==J&&(z=i,J&&(z-=J));if(z){ah();for(;z>0;z--){ab+="\n"}af=!0,!a(X,"comment")&&!X.type.match(/^(comment|string)$/)&&(am=am.trimLeft())}if(am){X.type==="keyword"&&am.match(/^(if|else|elseif|for|foreach|while|switch)$/)?(r[ae]=am,K(),ai=!0,am.match(/^(else|elseif)$/)&&ab.match(/\}[\s]*$/)&&(ah(),an=!0)):X.type==="paren.lparen"?(K(),am.substr(-1)==="{"&&(ai=!0,aa=!1,t||(z=1)),am.substr(0,1)==="{"&&(an=!0,ab.substr(-1)!=="["&&ab.trimRight().substr(-1)==="["?(ah(),an=!1):ab.trimRight().substr(-1)===")"?ah():Z())):X.type==="paren.rparen"?(Q=1,am.substr(0,1)==="}"&&(r[ae-1]==="case"&&Q++,ab.trimRight().substr(-1)==="{"?ah():(an=!0,F&&(z+=2))),am.substr(0,1)==="]"&&ab.substr(-1)!=="}"&&ab.trimRight().substr(-1)==="}"&&(an=!1,ao++,ah()),am.substr(0,1)===")"&&ab.substr(-1)!=="("&&ab.trimRight().substr(-1)==="("&&(an=!1,ao++,ah()),Z()):X.type!=="keyword.operator"&&X.type!=="keyword"||!am.match(/^(=|==|===|!=|!==|&&|\|\||and|or|xor|\+=|.=|>|>=|<|<=|=>)$/)?X.type==="punctuation.operator"&&am===";"?(ah(),K(),ai=!0,F&&z++):X.type==="punctuation.operator"&&am.match(/^(:|,)$/)?(ah(),K(),ai=!0,af=!1):X.type==="support.php_tag"&&am==="?>"&&!af?(ah(),an=!0):a(X,"attribute-name")&&ab.substr(-1).match(/^\s$/)?an=!0:a(X,"attribute-equals")?(Z(),K()):a(X,"tag-close")&&(Z(),am==="/>"&&(an=!0)):(ah(),K(),an=!0,ai=!0);if(af&&(!X.type.match(/^(comment)$/)||!!am.substr(0,1).match(/^[/#]$/))&&(!X.type.match(/^(string)$/)||!!am.substr(0,1).match(/^['"]$/))){ao=I;if(ae>aj){ao++;for(G=ae;G>aj;G--){W[G]=ao}}else{ae<aj&&(ao=W[ae])}aj=ae,I=ao,Q&&(ao-=Q),aa&&!V&&(ao++,aa=!1);for(G=0;G<ao;G++){ab+=ac}}X.type==="keyword"&&am.match(/^(case|default)$/)&&(r[ae]=am,ae++),X.type==="keyword"&&am.match(/^(break)$/)&&r[ae-1]&&r[ae-1].match(/^(case|default)$/)&&ae--,X.type==="paren.lparen"&&(V+=(am.match(/\(/g)||[]).length,ae+=am.length),X.type==="keyword"&&am.match(/^(if|else|elseif|for|while)$/)?(aa=!0,V=0):!V&&am.trim()&&X.type!=="comment"&&(aa=!1);if(X.type==="paren.rparen"){V-=(am.match(/\)/g)||[]).length;for(G=0;G<am.length;G++){ae--,am.substr(G,1)==="}"&&r[ae]==="case"&&ae--}}an&&!af&&(Z(),ab.substr(-1)!=="\n"&&(ab+=" ")),ab+=am,ai&&(ab+=" "),af=!1,an=!1,ai=!1;if(a(X,"tag-close")&&(aq||ap.indexOf(R)!==-1)||a(X,"doctype")&&am===">"){aq&&ak&&ak.value==="</"?z=-1:z=1}a(X,"tag-open")&&am==="</"?ae--:a(X,"tag-open")&&am==="<"&&U.indexOf(ak.value)===-1?ae++:a(X,"tag-name")?R=am:a(X,"tag-close")&&am==="/>"&&U.indexOf(R)===-1&&ae--,J=i}}X=ak}ab=ab.trim(),al.doc.setValue(ab)},b.commands=[{name:"beautify",exec:function(g){b.beautify(g.session)},bindKey:"Ctrl-Shift-B"}]});(function(){window.require(["ace/ext/beautify"],function(a){if(typeof module=="object"&&typeof exports=="object"&&module){module.exports=a}})})();